# 第五章 集合

含有一个元素的集合称为**单元集**，例如 $\{\empty\}$

含有$n$个元素的集合称为$n$元集

由集合$A$的所有子集构成的集合称为$A$的幂集，记为$\rho(A)$

有穷集$A$的元素个数称为$A$的基数，记为$\#A$



- **定理：$\#\rho(A)=2^{\#A}$**

- $\rho(A)\cup\rho(B)\subseteq{\rho(A \cup B)}$

- $\rho(A)\cap\rho(B)=\rho(A\cap B)$
- $\rho(A-B)\subseteq{\rho(A)-\rho(B)}\cup\{\empty\}$



如果集合$A$中的每个元素都是集合，称$A$为集合的**聚合**，或者**集合族**

设$C$是一个集合的聚合，如果$C$中很合的两个不同的元素都是不相交的，则称这个聚合是**不相交**的聚合，不相交聚合的元素称为互不相交的元素



$A$和$B$的对称差集的定义如下：

$A+B=\{x|x\in{A} \oplus x \in B\}$

也就是不同时在$A$和$B$当中的所有元素构成的集合



集合恒等式的两个证明方法

- 证明 $x\in A\Leftrightarrow x \in B$
- 证明$A \subseteq B $ 并且 $B \subseteq A$
- 用其他的恒等式进行推演



**定理**：

- $B = \thicksim A$ 当且仅当$A \cup B = U$ 和 $A \cap B = \empty$

- 此四条件等价：
  - $A \subseteq B$
  - $A \cup B = B$
  - $A \cap B = A$
  - $A - B = \empty$



 **广义并和广义交**

设$A$是全集$U$的子集的聚合。

- $A$的**所有元素的并集**为：

  $$\cup A = \{x|\exist a (a \in A \and x \in a)\}$$

- 若$A \neq \empty$，$A$的**所有元素的交集**为

  $\cap A = \{x|\forall a (a \in A \rightarrow x \in a) \}$



**有穷集的计数原理**

设$A$和$B$是两个不相交的有穷集，则$\#(A \cup B) = \# A + \# B$



**定理**：

- 若$A$和$B$都是有穷集，那么

  $\#(A \cup B) = \#A + \#B - \#(A \cap B)$



**集合的归纳定义法**

三个部分：

- **基础语句** 直接规定部分对象是该集合的元素
- **归纳语句** 规定由已知元素得到新元素的方法
- **极限语句** 规定那些对象不是该集合的元素



> *这些乱七八糟的煞笔东西真的会考吗？*



**字母表**：符号的有穷非空集合，通常用 $\sum$ 来表示

**字符串** ：$\sum$ 上的**字或者串**

在字母表$\sum$上的字$x$和$y$的**连接**是将$y$接在$x$后面得到的字，记为$xy$

对于任意字$x$有$\varepsilon x = x \varepsilon = x$（$\varepsilon$大概是空字符串的意思吧）



$\sum^{*}$：$\sum$上字的集合

$\sum^{+}$：$\sum$上所有非空字的集合



显然有：$\sum^{+} = \sum^{*} - \{\varepsilon\}$



如果有$x \in \sum^{*}$ 并且 $n \in N$ 定义串$x^{n}$为

- $x^{0}=\varepsilon$

- $x^{n+1}=x^{n}x$



**定义**：

- 称$\sum^{*}$的子集为$\sum$上的**语言**

- $\sum$上语言$A$和$B$的乘积：

  $AB=\{xy|x \in A \and y \in B\}$

  （注意：乘积运算**满足结合律**，但是**不满足交换律**）

- 设$A \subseteq \sum^{*}$，$n \in N$，则$A^{n}$定义如下：
  - $A^{0} = \{\varepsilon\}$
  - $A^{n+1}=A^{n}A$



**定理**：

设$A,B\sube \sum^{*}$，$m$和$n$是自然数，则

- $A^{m}A^{n}=A^{m+n}$
- $(A^{n})^{m}=A^{mn}$
- 若$A\sube B$，则$A^{n} \sube B^{n}$



**定义**：

设$A$是$\sum^{*}$的子集，则集合$A^{*}$定义为：

- $A^{*}=\cup\{A^{n} | n是自然数\}$

$A^{*}$称为**星闭包**或者简称**闭包**



集合$A^{+}$定义为：

- $A^{+}=A^{1}\cup A^{2} \cup \dots = \cup_{n = 1} ^ {\infin} A^{n}$

集合$A^{+}$称为$A$的**正闭包**



显然$A^{*} = A^{+} \cup \{\varepsilon\}$



**笛卡尔乘积**：

```C++
std::pair<int, int> result;
// 有序偶
for(const auto& a : setA) {
    for(const auto& b : setB) {
        result.push_back({a, b});
    }
}
```



# 第六章 关系

所谓**关系**，就是任何有序偶的集合，这称为**二元关系**，简称为**关系**

```C++
std::set<std::pair<int, int>> relation;
```

**全域关系**：

​	$U_X=\{<x, y>|x \in X \and y \in X\}$

**空关系**：

​	$\empty$

**恒等关系**：

​	$I_X=\{<x, x> | x \in X\}$



定义域记为$dom(R)$ (domain of)

值域记为$ran(R)$ (range of)



**关系矩阵**：用矩阵表示非空有穷集合之间的关系



**关系图**：若$x_iRx_j$，那么就画一条从$x_i$到$x_j$的**有向**边



**关系的性质**：

- **自反的**：自己和自己有关系
  - **反自反的**：自己和自己一定没有关系
- **对称的**：我和你有关系，你和我也就有关系
  - **反对称的**：如果$x$和$y$有关系，并且反过来也一样，那么$x$和$y$只有可能是同一个对象（与对称不一定冲突）

- **传递的**：如果我和你有关系，你和他有关系，我也就和他有关系



$R$是**自反的**当且仅当$I_X \sube R$

$R$是**反自反的**当且仅当$I_X \cap R = \empty$

$R$是**对称的**当且仅当$R^{-1}=R$

$R$是**反对称的**当且仅当$R \cap R^{-1} \sube I_X$

$R$是**传递的**当且仅当$R \circ R \sube R$



在关系的运算中，将$X \times Y$看做全集

设$R$是从$X$到$Y$的关系，$S$是从$Y$到$Z$的关系，那么

​	$(R \circ S) ^{-1} = S^{-1} \circ R^{-1}$

（类似**函数**）



**闭包**的定义：

> 讲人话就是：$R$的某个性质的闭包就是包含$R$的最小的满足某个性质的关系，大一点可以，小了绝对不行。



**自反闭包**：$r(R)=R \cup I_X$

**对称闭包**：$s(R)=R \cup R^{-1}$

**传递闭包**：$t(R)=\cup_{n=1}^{\infin}R^{n}$

- 通过定理，我们可以简化传递闭包的计算

  $t(R) = \cup_{i=1}^{n}R^{i}$



**次序关系**：

如果$R$是非空集合$P$上：**自反的，反对称的，传递的**关系，那么就把$R$称为**偏序关系**或者**偏序**。（其实就类似于广义的单向比较关系）



**全序集**：

如果在偏序集$<P, \le>$上对于任意的$x, y \in P$我们都有$x \le y$或者$y \le x$当中至少一个成立，那么这个$\le$就称为$P$上的**全序**或者**线序**，并且把$<P, \le>$称为**全序集**或者**链**

> 人话：这个比较关系对于这个$P$上任意两个元素都是可比的，没有奇奇怪怪的类似问$1 \le i ?$ 这种的。



如果$R$是偏序，那么如果$R^{-1}$也是偏序，就把$R^{-1}$记为$\ge$，把两个偏序集$<P, \ge>$ 和 偏序集$<P, \le >$称为**相互对偶**的偏序集



**严格偏序集**：

**反自反的，传递**的关系，称为**严格偏序关系**或者**严格偏序**

> 类似于不同于$\le$的$\lt$



**遮盖**：

在偏序集上，对于任意两个元素$x, y \in P$如果有$x \lt y$并且没有中间的$z$使得$x\lt z$ 并且$z \lt y$那么就说$y$**遮盖**$x$，也称元素 $x$是$y$的**紧邻前元**

> 后面就是他，没别的



**哈斯图**：

如果$x \lt y$，那么$x$就要在$y$的下面，如果$x$刚好是$y$紧邻的前元，就要在$y$和$x$之间连一个**无向边**



- 注意：

  **省略自环，边的方向，不是紧邻的顶点之间的边**



**最与极**：

省流：以最大，极大为例：

​	极大：我**不确定大家是不是都比我小**，但是**找不到比我大的了**（可能是因为**不可比**）（不存在$x$使得$b \lt x$）

​	最大：我**非常确定大家都比我小**，因为**我和大家都能比较而且比较出来都是我比他们大**（$\forall x \in B, x \le b$）



**界和确界**：

省流：以上界，上确界为例：

​	上界：**所有的$x$都比我小**

​	上确界：**擦边球**，刚好满足上界的条件



**良序**   ~~麻油新作  GOOD ORDER~~

省流：在一个偏序集上**随便拿一坨出来都有最小的那个（最小元）**



- **全序集不一定是良序集**

- **良序集一定是全序集**
- **良序的逆关系未必是良序**（你可能可以找到最小，未必能找到最大）



**划分**：

省流：类似把一个集合切几刀（不能切空气，即不能划出来空集）

- 划分出来的块就是叫做**划分块**或者**块**
- 块的个数为划分的**秩**



**等价关系**：

**自反的，对称的，传递的**

> 人话：自己和自己一样，某些小团体内互相有关系，和别的小团体没有



- **同余关系/模等价关系**：

​	$x \equiv_m y$表示$x \% m = y \% m$，$\equiv_m$是整数集$I$上的一个等价关系



- **简化关系图**：

  省略**自环**，省略**边的方向**



- **等价类**：

  开头人话当中说的*小团体*。用$[x]_R$表示**由$x$所代表的等价类**（就是从一堆等价的当中选一个出来，反正都等价嘛）



- **商集**：

  设$R$是$X$的等价关系（$X$非空），那么$R$等价类的集合$\{[x]_R|x \in X\}$很明显是$X$的一个划分，我们把这个划分称为$X$模R的**商集**  ~~真TM抽象~~

  记为：$X / R$或者也可以记为$X (mod \ R)$



- **由划分确定等价关系**：

  如果$R$的定义是在划分$C$下，$x R y \Leftrightarrow \exist S(S \in C \and x \in S \and y \in S)$

  > 人话：划分在一块的互相之间有关系

​	那么，$R$是一个等价关系。



- **等价关系和划分的关系**：

  通过等价关系$R$可以得到一个商集$X / R$，由于商集在前面提到了，是一个划分，那么这个划分又可以确定一个**等价关系**（前面也说了，划分在一块的之间有关系）$R'$，可以知道：

  ​	$x R' y \Leftrightarrow x和y 在同一块中$。

​	事实上，$R'$，$R$是同一个关系。~~那你说nm呢~~



# 第七章 函数



就是满足单值性的关系

如果$<x, y> \in f$ 并且 $<x, z> \in f$ 那么$y$和$z$只能是一样的（**固定输入，固定输出**）



如果有 $\forall x \in X, \exist y \in Y, <x, y> \in f$,那么这个$f$就称为**从$X$到$Y$的函数**。

记为：$f:X \rightarrow Y$



其实，这里的函数指的是**单值全函数**，也就是说有单值性，并且在$X$上处处都有定义。

- $f \sube X \times Y$
- $dom(f) = X$
- $f$是函数，有**单值性**

注意，**函数的逆关系不一定是函数**



**常用函数**

- **恒等函数**：$I_X$
- **后继函数**：$\forall n \in N, S(n) = n +1$当中的$S: N \rightarrow N$
- **地板函数**：向下取整
- **天花板函数**：向上取整（~~这两个说这么骚干嘛~~）



**限制和开拓**

函数$f:X \rightarrow Y$又有$A \sube X$，那么$f \cap (A \times Y)$明显是从$A$到$Y$的函数。（其实就是限制了$f$的自变量范围），就说$f$**受限制**于$A$，记为$f | A$。反过来，$f$是$f | A$的**开拓**。



**象**    ~~生意行啊~~

就是某个集合（注意其中所有元素都在定义域当中）经过~~工厂~~函数$f$加工后的结果的集合。

骚一点表示就是：

$\{f(x)|x \in X'\}$

**整个定义域**的象就称为函数$f$的象



**从$X$到$Y$的偏函数**

> 人话：函数，但是定义域不一定盖满整个$X$集合



**函数的符合**

~~懒得说了，有什么好说的~~

**定理**

- $\forall x \in X, (g \circ f)(x) = g(f(x))$

- 如果$I_X$和$I_Y$都是**恒等函数**，对于函数$f:X \rightarrow Y$ 有： $f \circ I_X = I_Y \circ f = f$（类比于一个函数$y = f(x)$外面套一个$y = x$）



记$f$的$n$次复合为：$f^{n}(x)$



**多元函数**

```pyt
def function(val:tuple):
	# ...
```



**特殊性质的函数**

- **满射的**：射满了。就是映射的结果布满整个$Y$
- **单射的**：只有我才能有他，不能有别人（即不能存在两个不一样的$x_1, x_2$的函数值相同）
- **双射的**：满足上面两种情况，又称**一一对应**



**常值函数**

$\forall x \in X, \exist y \in Y, f(x) = y$



**定理**

- 双射反过来也双射：$f:X \rightarrow Y$是双射函数，那么$f^{-1}:Y \rightarrow X$也是双射函数

- 双射完全可逆：$f:X \rightarrow Y$是双射的，那么$f^{-1} \circ f = I_X$并且$f \circ f^{-1} = I_Y$
- 双射是双射的逆则复合为$I$：$f:X \rightarrow Y$和$g: Y \rightarrow X$都是双射函数，那么$g = f^{-1}$当且仅当$g \circ f = I_X$ 并且 $f \circ g = I_Y$



**双射集合构成群**

对于一个由$X$到$X$的所有的双射函数组成的集合$F_X$

- **封闭性**：$\forall f, g \in F_X$，怎么复合都还是在$F_X$当中
- **结合律**：不用多说。
- **有单位元**：有个$I_X \in F_X$，别的复合它相当于没复合
- **有逆元**：$\forall f \in F_X$都有一个反函数$f^{-1}$



称$<F_X, \circ>$是**群**（~~什么乱七八糟的~~）



**集合的特征函数**

设$A$是全集$U$的一个自己，那么它的特征函数 $\Psi_A: U \rightarrow \{0, 1\}$定义为：

$$\Psi_A(x) = \begin{cases} 1(x \in A)\\ 0 (x \notin A) \end{cases}$$

**就是在里面就是1，不在就是0**



# 第九章 图论

~~谁在乎一个不考的第八章呢~~



有向图，无向图，blablablabla……算法里重复的就不说了



**边**（edge）又可以被称为**弧**（arc）

一个图表示为$D = <V, A>$，其中$V$代表$vertices$，也就是所有顶点的集合。$A$代表$arcs$，也就是所有边的集合。

```cpp
std::pair<std::set<Vertex>, std::set<Arc>> graph;
```



如果存在一个弧$<u, v> \in A$就说$u$邻接到$v$，$u$是$a$的**始点**，$v$是$a$的**终点**，它们都是$a$的**端点**

关联于同一顶点的不同弧是**相邻的**



**简单图**：

​	没有自环和重边



**顶点的次数**：

​	这都不知道就重开吧



**孤立点**：

​	次数为$0$的孤零零的点



**悬挂点**：

​	被一条弧挂着的点，次数为$1$



**悬挂边**：

​	挂着悬挂点的边



**零图**：

​	没边，只有顶点



**平凡图**：

​	只有一点，没边



**握手定理**：

​	对于一个有向图$(n, m)$，

​	$\sum_{all} od(u_i) = \sum_{all}id(u_i) = m$

​	每个边对总次数的贡献**都是$2$**



**正则图**：

​	所有顶点的**次数相同**。如果都为$r$，那么就叫$r$次的正则图



**完全图**：

​	任意两个顶点都连上的**简单无向图**，记为$K_{n}$



**有向完全图**：

​	任意两个顶点之间都**只有一条弧**的**简单有向图**，又称为**竞赛图**。每个顶点的次数都是$n - 1$，边数为$n(n-1)/2$，（其实就是$C_n^2$）



**图的同构**：

​	如果存在那么一个对应关系$\tau: V_1 \rightarrow V_2$使得$(u,v)\in E_1$ 当且仅当$(\tau(u), \tau(v)) \in E_2$，并且重数相同，就说$G_1$和$G_2$同构。

​	其实就是本质上存在一种映射发现两个图之间的顶点的**性质，地位**相同



**子图**：

​	去掉一些边和点形成的图。如果还不相等，就叫**真子图**



**补图**：

​	子图并上它就是完整的原本的图



**由……导出的子图**：

​	就是某个图选些边和它们的端点变成的子图，就是**选取的源导出的子图**，生成的子图是原来的图的**生成子图**



**连通性**：

​	还是看看隔壁的 graph killer 吧家人们。

-  **通路**：顾名思义$(a_1, a_2, a_3 \dots a_t)$也可以记成顶点的形式。

- **简单通路**：没有重复的边

- **基本通路**：没有重复的顶点

- **回路**：起点和终点相同
- **半通路**：**有向图**除了最后一条弧之外都和随后的相邻的一列弧。（不一定走得通，顺着走可能会逆行）



**定理**：

- 三角不等式：$d(u,w) \le d(u,v) + d(v, w)$ （别太惊讶，说的是**长度**不是**权重**）
- 在$n$阶有向图中，任何**基本通路**的**长度**都不会超过$n - 1$，**基本回路**的**长度**不会超过$n$



- **强连通**：任何两点可以互相到达
- **单向连通**：任何两个点至少一个可以到另一个
- **弱连通**：反正任何两个点都是连上的 



从下往上满足$n$个条件：$n$度连通（越来越通）



**完备通路**：经过有向图所有顶点的通路

**完备回路**：经过有向图中所有顶点和回路

**完备半通路**：经过有向图当中所有顶点的半通路



**定理**：

- 有向图$D$是**强连通**的当且仅当$D$有一条**完备回路**
- 有向图$D$是**单向连通**的当且仅当$D$有**完备通路**
- 有向图$D$是**弱连通**的当且仅当$D$有**完备半通路**



**链**：无向图中**每条边都和后面的一条边相邻**的序列（最后一条除外）

> 人话：能连续走的一条路



**简单链**：各边互不相同

**基本链**：各顶点互不相同

**闭合链**：顺着这条链走最终回到起点

**圈**：闭合链，但是**顶点互不相同，边也互不相同**



**连通分支**：图中一堆互相能连通的点的集合，不能和外面的有关系



**割点**：去掉顶点$v$和与它相联的边后就**不连通**了

**割边**（桥）：去掉边$e$就**不连通**了



**顶点基**：图$G$当中一堆点的集合$B$，如果这些点出发能到达$G$中所有的顶点，**并且**，$B$中只要少一个都不能做到





**强（单向，弱）分图**

省流：一个有向图$D$的一部分$D'$，它是**强连通**的，并且只要少一点点就不能强连通了，就是**强连通分图**，其他几个定义类似



**定理**：

- 在一个有向图中，**每个顶点在唯一的强分图中**，**每条弧最多在一个强分图中**

  - 你可以把能互相到达的点划在一起，这样划分出来的小集合就是一些强分图，也容易知道不可能有边又在小集合$A$中又在小集合$B$当中

    >  我们用关系$R$：$u R v \Leftrightarrow u和v可以互相到达$ 划分强分图。
    >
    > 我们随便取一个顶点$v$，那么这个顶点代表的等价类$[v]_R$（就是$v$所在的那一坨）肯定是一个强分图。
    >
    > 
    >
    > 假设：如果$v$在强分图$A$，又在强分图$B$当中，那么可以知道$A$和$B$当中的顶点肯定都可以到$v$，也可以通过$v$到对面的集合
    >
    > 
    >
    > 所以$A \cup B$肯定整体是一个强分图。又知道强分图只要少一点点就不可能是强分图，所以$A \cup B = A = B$

    > 假设一条弧$a$它在两个强分图当中，我们肯定知道它的端点必须同样是在两个强分图当中，那么就和上面的矛盾了。

**压缩**：

省流：把互相能到达的（强分图）放一块，这个集合看成一个点。**只关心集合与集合之间的关系**



**定理**：

- 有向图$D=<V,A>$的压缩$D^*$是无回路图
  - 就是如果有回路说明你压得不彻底（回路上的所有的集合可以合并一下）
- 无回路有向图$D=<V,A>$有唯一的顶点基，由**所有引入次数为$0$的顶点**组成
  - 你要不选引入次数为$0$的那么这些就没人能到达了
- 设$D^{*}$是有向图$D=<V,A>$的压缩，$B^{*}$是$D^{*}$的唯一顶点基，那么**从$B^{*}$当中每个元素中取出一个顶点构成的集合$B$是$D$的顶点基**，并且可以通过这样的方法得到$D$的每个顶点基。
  - 其实还是很好理解的，想想就能明白
- 有向图$D$的**每个顶点基都包含同样数目的顶点**
  - 由上一个你其实也能想到，顶点个数其实就是压缩后顶点的个数



# 第十章 通路问题

> 什么关键通路真的烦死了不讲人话



最短通路应该没的说，我总不能在这里打算法的板子罢



**工序流线图**：

- 没有回路
- 只有一个引入次数为$0$的点，这个点叫做**发点**
- 只有一个引出次数为$0$的点，这个点叫做**收点**
- 每个订单都在某条从发点到收点的通路上
- 没有负权边



**最早完成时间**：在工序流线图当中从发点$u_i$到事件$u_j$的**最长通路长度**，事件$u_j$的最早完成时间，我们记为$TE(u_j)$

> 前置工作必须全完成才能做这件事情



如何求一个事件的最早完成时间？

> 递归求，为了求他，就求他之前的事件的最早完成时间

我们定义：

- **后继点集**：$\Gamma^{+}(v)$：在这个事件之后，有边直接相连的事件。$\{u|u \in V \and <v, y \in A>\}$
- **前驱点集**：$\Gamma^{-}(v)$：在这个事件之前，有边直接相连的事件。$\{u|u \in V \and <u,v> \in A\}$



最早完成时间：$TE(v) = \max\{TE(u) + I(u, v) | u \in \Gamma^{-}(v)\}$

```c#
int max = -1;
foreach(var parent in this.parent) {
    max = Math.max(max, parent.time + parent.lineTo(this));
}
this.TE = max;
```



显然对于收点$u_n$，**它的最早完成时间就是整个计划的最早完成时间**



**最迟完成时间**：对于一个工序流线图，在保证$u_n$的最早完成时间不增加的情况下（就是不能硬拖时间），从$u_1$最迟到达$u_j$的时间，记为$TL(u_j)$



一个奇奇怪怪的推导：

> 设$P$是从$u_j$到收点$u_n$最长的那条路，如果到达$u_j$的时间是$TE(u_n) - I(P)$，我们能知道整个计划的完成时间还是$TE(u_n)$
>
> 但是，如果到达$u_j$的时间比$TE(u_n)-I(P)$要迟，整个完成时间就会大于$TE(u_n)$
>
> 所以最迟完成时间$TL(u_j)$就只能是$TE(u_n) - I(P)$ （因为规定了，最迟完成时间是建立在不能硬拖整个计划的完成时间的前提上的）



类似于最早完成时间，最迟完成时间也可以递归地求解：

$TL(v) = \min\{TL(u) - I(v, u) | u \in \Gamma^{+}(v)\}$

```c#
int min = int.MaxValue;
foreach(var path in this.paths) {
    var dest = path.to;
    min = int.min(min, dest.GetTL() - path.weight);
}
this.TL = min;
```

**总结：求最早就从发点开始求最大，求最迟就从收点开始反过来求最小**



**关键通路**：在工序流线图当中，从发点到收点的**最长通路**

容易知道，这个关键通路的长度一定是$TE(u_n)$



**定理**：如果某个事件$u_j$在关键通路上，当且仅当它的$TE$与$TL$相等



**缓冲时间**：由于某些事件，它们的$TE$和$TL$不相等，它们就是可以稍微**缓一下**再执行，这个最大限度就是$TS$（缓冲时间）

$TS(v) = TL(v) = TE(v)$



# 第十一章 图的矩阵

**邻接矩阵**

> 这东西真的需要说吗？你不知道就等于你没写过弗洛伊德算法



对于一个有向图的邻接矩阵（有边为$1$，无边为$0$，边没有权重）$M$，其幂$M^{l}$当中：**$m_{ij}^{l}$刚好等于顶点$u_i$到顶点$u_j$的长度为$l$的通路的个数**

> 挺好理解，矩阵乘一次类似于往后走一步



**无向图的邻接矩阵**：

和有向图的很类似，但是一定对称



和上面的类似：

如果$G=<V,E>$是无向图，它的邻接矩阵$M=(m_{ij})_{n \times n}$的幂$M^{l}$中，$m_{ij}^{(l)}$是从顶点$u_i$到顶点$u_j$的长度为$l$的**链**的个数



**有向图的可达性矩阵**：（~~为什么满脑子都是可达鸭~~）

即$R=(r_{ij})_{n \times n}$定义为：

$r_{ij}=\begin{cases} 1 \ 如果u_i可达u_j \\ 0 \ 否则\\ \end{cases}$

因为自己肯定能到自己，所以**主对角线元素一定都是$1$**



定义一个布尔函数$B:N \rightarrow \{0, 1\}$，

$B(x) = \begin{cases} 0 \ 如果x=0 \\ 1 \ 如果 x \ge 1\end{cases}$

```C
int Bool(int x) {
    return x != 0;
}
```



对于一个矩阵$M$，施加$B$函数就是把所有不是$0$的都改成$1$

$$B(\begin{bmatrix} 1&2&3 \\ 4&5&6 \\ 0 & 0 & 1\end{bmatrix}) = \begin{bmatrix} 1 & 1 & 1 \\ 1 & 1 & 1 \\ 0 & 0 & 1\end{bmatrix}$$

**邻接矩阵$M$和可达性矩阵$R$之间的关系**（有点像传递闭包？）：

$R = B(I + M + M ^ 2 + M^3 + \dots + M^{n - 1}) = B((I + M) ^{n - 1})$



$A$和$B$的元素积定义为$$A \times B = (a_{ij}b{ij})_{n \times m}$$，即相同位置的元素互相乘

**注意**$A \times B \ne AB$



**定理**：

- 设$R = (r_{ij})_{n \times n}$是有向图$D$的可达性矩阵，并且$R^2 = (s_{ij})_{n \times n}$，那么：

  - 由$R \times R^{T}$的第$i$行（列）中等于$1$的元素对应的顶点导出的子图是$u_i$所在的强分图。

    > 很好理解，$R$代表着$a$能否到达$b$，转置一下就是$b$能否到达$a$，相乘就是两者能互相到达

  - $u_i$所在的强分图有$s_{ii}$个顶点

- 设$R$和$M$分别是$n$阶有向图$D$的可达性矩阵和邻接矩阵，那么：

  - $D$是强连通的当且仅当$R$的元素全为$1$

    > 全部都可以互相到达嘛

  - $D$是单向连通的当且仅当$B(R+R^{T})$的元素全为$1$

    > $R+R^{T}$就是$a$能到达$b$ 或者 $b$能到达$a$

  - $D$是弱连通的当且仅当$B(I + N + \dots + N^{n - 1})$的元素全部都是$1$，其中，$N = B(M + M^{T})$

    > 有点混乱，记住吧

  - $D$是无回路的当且仅当$M + \dots + M^n$的主对角线元素全为$0$

    > 就是不能回到自己的意思



**关联矩阵**：表示了弧和顶点之间的关联

在有向图的环境下：$B = (b_{ij})_{n \times m}$定义：

$b_{ij}=\begin{cases}1 \ \  u_i是弧a_j的始点\\-1 \ \ 若u_i是弧a_j的终点\\ 0 \ \ 若u_i不是弧a_j的端点\end{cases}$

而在无向图的环境下：

$B=(b_{ij})_{n \times p}$的定义为：

$b_{ij} = e_j与u_i的关联次数$



**注意**：

- **邻接矩阵**和**关联矩阵**能完全描述有向图$D$的图论性质，如果$D_1$和$D_2$同构，当且仅当**在适当顺序下，两个图的邻接矩阵和关联矩阵完全相同**

- 但是**可达性矩阵并不能完全反映图论性质，就算可达性矩阵相同，两个有向图也可能不同构**



# 第十二章 树

**定义**：**连通且无圈**的无向图

无圈的无向图称为**林**，因为它的每个连通分支都是一个**树**

~~我家门口两棵树，一棵是二叉树，一棵是红黑树~~



**树的所有等价定义**：

对于一个无向图$T(n,m)$

- $T$连通且无圈
- $T$没有自环，并且每对顶点之间有唯一的基本链
- $T$连通，在$T$当中加一个边就仅有一个圈
- $T$连通，去掉任何一个边就不连通了
- $T$连通，并且$m = n - 1$
- $T$无圈，并且$m = n - 1$

~~谁在意他们的证明呢~~



**树叶**：次数为$1$的顶点

**分支顶点**：次数大于$1$的顶点（分叉了）

**平凡树**：一个点



**定理**：

- 非平凡树当中**至少两个树叶**



**根树和有序树**：

只要在无向图的环境下，某个图是树，**那么其中的边都变成有向边，变成的有向图也是树**



**根树**：有向树$T$有一个顶点引入次数为$0$（树根），其他的都为$1$

**树叶**（根数环境下）：引出次数为$0$的顶点

**分支顶点**：又不是树根又不是树叶

**级**：从树根到某个顶点的通路的长度

**树高**：根树当中顶点的级的最大值（树根的级令为$0$）



**有序树**：如果一个根树，它的顶点或者弧被指定了次序，那么它就被称为有序树（有标号而已）



**二元树**：二叉树

**位置二元树**：大儿子节点成为位置二元树当中的左子节点，而兄弟节点成为右儿子节点

~~我把你当兄弟，你却把我当爸爸~~



**有序林**：每个弱分图（坨）都是有序树，并且各个有序树都被规定了顺序



**最优二元树**：$\sum_{all}权 \times 级$ 最小的二元树，这个和也称为整个二元树$T$的权，记为$m(T)$



**定理**：

- 设$t \ge 2, P_1 \le P_2 \le \dots \le P_t$那么就一定存在一个相应的最优二元树，其中权为$P_1$和$P_2$的树叶是兄弟

- 前置条件与上面的相同，设$T$是带权$P_1 + P_2, P_3, \dots , P_t$的二元树，现在把$P_1 + P_2$这个顶点分裂成$P_1, P_2$两个顶点，这两个顶点作为原本$P_1 + P_2$所在位置的两个叶子节点。

  那么：

  原本的二元树最优$\Leftrightarrow$新的二元树最优

  （这也是Huffman编码的原理）



**生成树**：若无向图$G$的生成子图$T$是树，就把它称为$G$的生成树

> 人话：选个骨架连接所有的点，这个骨架不能有圈

**相对于这个生成树**，在这个生成树当中的边叫做**树枝**，否则叫做**弦**

​	很明显，对于一个$(n,m)$无向图一共有$n - 1$个树枝，减去它们，就还剩下$m - (n - 1)$个弦



**定理**：

- 一个无向图，当且仅当是**连通**的，才能有生成树

  > 你都不连通了，其中选个骨架就更不可能了



**基本圈**：对于一个无向图$(n,m)$的生成树$T$，随便取一个弦$e$，容易知道$T+e$有一个唯一的圈，这个圈成为对应于弦$e$的基本圈。由这$m-n+1$个基本圈组成的集合称为关于$T$的基本圈组。



**最小生成树**：

> \* 很好。需要我给你放个Kruskal的板子吗？



**割集**：设连通的一个无向图$G = <V,E>$，有一个$E' \sube E$，如果$G - E'$就不连通，分离成两个连通分支，并且去掉的边集合$E'$只要少一个都是连通的，那么就说$E'$是$G$的割集



**基本割集**：（相对于一个生成树）只有一个树枝，其他的全是弦

> 因为$G$的骨架是$T$，你把其他的去掉过后，骨架仍然能连通所有的顶点，那么你至少掰断一根骨头使得$G$断开，只掰断一根骨头的，就是基本割集

**基本割集组**：（相对于一个最小生成树）所有的$n - 1$个基本割集



**定理**：

- **每个圈当中都包含弦**
- **每个割集当中都包含树枝**
- **任何圈和任何割集都有偶数（包括$0$）条公共边**
- 给定一个生成树$T$，设基本割集$D = \{e_1, e_2, \dots, e_k\}$，其中$e_1$是树枝其他全是弦，**那么 $e_1$包含在对应于$e_2, \dots, e_k$的基本圈里，但是绝对不包含在任何其他的一个基本圈里**（这个定理有点乱七八糟的）

- 同样给定一个生成树$T$，设$C = (e_1, \dots, e_k)$是一个基本圈，其中$e_1$是弦其他的全是树枝，**那么$e1$包含在对应于$e_i(i=2,\dots,k)$的基本割集当中，但是绝对不包含在其他任何一个基本割集当中**



# 第十三章 穿程问题

**欧拉圈**：不重复地穿过无向图中每条边的链（穿过每个边的简单闭合链）

**欧拉图**：有欧拉圈的图（能一笔画的图）



**定理**：

- 如果无向图$G$当中每个顶点的次数都大于$1$，那么就一定有圈
- 如果一个**连通无向图**的**每个顶点都是偶顶点**，那么它是欧拉图



**欧拉链**：穿过无向图$G$当中每条边的**简单非闭合**的链 （和欧拉圈很像，但是不要求是个圈）



**定理**：

- 连通无向图$G$当中，**存在连接顶点$u$和$v$的欧拉链，当且仅当只有$u$，$v$是图中的奇顶点**



**欧拉回路**：和欧拉圈很像，但是是在**有向图**环境下的

**欧拉图**（有向图意义下）：有欧拉回路的有向图

**欧拉通路**：传过有向图中每条弧并且非闭合的简单通路（和欧拉回路很像，但是**不要求闭合**）



**哈密顿圈**：穿过无向图$G$中每个顶点一次且仅一次的圈（和欧拉圈定义有点像，但是是针对点而言的，欧拉圈是针对边而言的）

**哈密顿回路**：穿过有向图$G$中每个顶点的基本回路

**哈密顿图**：有哈密顿圈或者哈密顿回路的图

**哈密顿链**：和哈密顿圈很像，但是**不要求闭合**

**哈密顿通路**：和哈密顿回路很像，但是**不要求闭合**



判断一个图是不是哈密顿图是**极其困难的**，**目前还没有找到简单充分必要条件**来判断



**定理**：

- 如果一个无向图$G=<V, E>$是一个哈密顿图，$U \sube V$并且$U \ne \empty$，那么可以得到

  $p(G - U) \le |U|$

  $p(G-U)$指的是，**$G$中删除$U$相关的所有内容后获得的连通分支数** 

- 如果无向图$G = <V, E>$有**哈密顿链**（注意不是哈密顿图），$U \sube V$并且$U \ne \empty$，那么可以得到

  $p(G - U) \le |U| + 1$

- 如果$n$阶简单无向图$G$当中**每对不相邻的顶点的次数之和**$\ge n-1$，那么$G$中存在**哈密顿链**

- 如果$n \ge 2$，若$n$阶简单无向图$G$中**每对不相邻的顶点的次数之和**$\ge n$，那么$G$是**哈密顿图**

- **有向完全图中必定存在哈密顿通路**（有人能说一下这个吗，没看懂这个定理存在的必要）





# 第十四章 二分图的匹配问题

**二分图**：把一个无向图$G=<V,E>$中的所有顶点$V$划分成两个非空的子集$X, Y$，同一子集中的任意两个顶点都互不邻接

**互补顶点子集**：上面提到的$X$和$Y$

**完全二分图**：$X$当中的每个顶点都和$Y$中的每个顶点相邻



**定理**：

- 如果无向图$G$中**有长度为奇数的闭合链**，那么在$G$中就有**长度为奇数的圈**（还挺明显的，虽然证明一坨）
- 非平凡无向图$G$是二分图当且仅当**$G$的每个圈的长度都是偶数**



**匹配**：在一个$G = <V, E>$二分图中，选取一个$M \sube E$，使得$M$中任何两条边都不相邻，那么$M$就是$G$的**匹配**。（其实就是不能重复，共享的配对连线）



**最大匹配**：所有匹配当中边数最多的匹配

**交错链**：相邻的两条边当中使用了和没使用的交替出现的一堆边

**饱和顶点**：匹配了的顶点

**非饱和顶点**：还没匹配上的顶点

**可扩充链**：两个端点都是非饱和顶点的交错链

（如果把可扩充链中使用和不使用互换一下，那么新得到的匹配中匹配上的点对数会多一对）

**定理**：

- 如果匹配$M$是最大匹配，**当且仅当不存在关于$M$的可扩充链**（扩无可扩就是最大的）



**从$X$到$Y$的匹配**：一个匹配，$X$中所有的点都被选取了。**这样的匹配一定是最大匹配**

**$\Gamma(U)$**：所有与$U$中顶点相邻的顶点组成的集合，叫做**$U$的邻域**



**定理**：

- 相异性条件：$G$中存在从$X$到$Y$的匹配当且仅当满足：对于$X$的任何子集$U$都有：$\#\Gamma(U)\ge \#U$
- 如果存在一个正整数$t$，使得$X$当中每个顶点的次数$\ge t$，而$Y$中每个顶点的次数$\le t$，那么$G$中存在从$X$到$Y$的匹配（充分条件）*又称为”$t$条件“*



> 一般先使用“$t$条件”判断是否存在匹配，因为$t$条件判断相对来说比较简单。但是注意，$t$条件只是一个充分条件，所以不满足它，不代表着一定没有，所以还需要再判断是否满足相对来说更难以使用的“相异性条件”



---



# 结语

- wow！真的不敢相信你看到了现在！

- 无论你是谁，都非常感谢你能看完我乱七八糟的整理，感谢你对我的信任。其实这只是我在复习离散数学时候的笔记，希望这样的整理能给你带来一些帮助。
- 离散数学确实又抽象，然后概念又一大坨。
- 你也看到了，整个整理当中，大多地方都在列举定义，很少涉及到证明等，因为定义实在是太多啦！看到后面又忘了前面。
- 不过希望通过一些直白的“人话讲述”，格式化书写，能让你更好地理解它们，面对考试。
- 无论是怎样的挑战，我们都要以勇气和乐观去面对。也许你刚被算法打击，也没关系！人生不止考试和成绩，重要的是梦想，贡献和快乐。
- *Tomorrow is another day.*
- 祝考试顺利！



~虾-2023/12/29~
